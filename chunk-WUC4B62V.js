import{F as l,I as p,bb as m,m as s,n as h,u as n,yb as d,z as u}from"./chunk-UAILVIBX.js";var b=class o{constructor(e,t){this.http=e;this.auth=t}CHRONOMAPS_API_URL="https://chronomaps-api-qjzuw7ypfq-ez.a.run.app";listWorkspaces(){let e={Authorization:"Bearer "+this.auth.token()};return this.http.get(`${this.CHRONOMAPS_API_URL}/`,{headers:e}).pipe(h(t=>t.workspaces||[]),n(t=>(console.error("Error fetching workspaces:",t),s([]))))}getWorkspace(e,t){return this.http.get(`${this.CHRONOMAPS_API_URL}/${e}`,{headers:{Authorization:`${t}`}})}getItems(e,t,r,a){let i={page:r,page_size:50};return a?i.filters=a:i.order_by="",this.http.get(`${this.CHRONOMAPS_API_URL}/${e}/items`,{params:i,headers:{Authorization:`${t}`}}).pipe(n(c=>(console.error("Error fetching items:",c.error),s(c.error))))}updateItem(e,t,r,a){return this.http.put(`${this.CHRONOMAPS_API_URL}/${e}/${r}`,a,{headers:{Authorization:`${t}`}})}updateItemModeration(e,t,r,a){let i={_private_moderation:a};return this.http.put(`${this.CHRONOMAPS_API_URL}/${e}/${r}`,i,{headers:{Authorization:`${t}`}})}createWorkspace(e){let t={Authorization:"Bearer "+this.auth.token()};return this.http.post(`${this.CHRONOMAPS_API_URL}/`,e.metadata,{headers:t}).pipe(u(r=>{let a={id:r.workspace_id,metadata:r.config.metadata,keys:r.config.keys};return console.log("Created workspace:",a),this.updateWorkspace(a.id,a.keys.admin,{metadata:null,public:e.public,collaborate:e.collaborate})}))}updateWorkspace(e,t,r){let a={Authorization:t},i={};return i.public=r.public,i.collaborate=r.collaborate,this.http.put(`${this.CHRONOMAPS_API_URL}/${e}`,r.metadata||{},{headers:a,params:i})}static \u0275fac=function(t){return new(t||o)(p(m),p(d))};static \u0275prov=l({token:o,factory:o.\u0275fac,providedIn:"root"})};export{b as a};
/**i18n:8dff8178f621bcc69192725557201a809317b399ed00a24037a7b59a2f24ea18*/
