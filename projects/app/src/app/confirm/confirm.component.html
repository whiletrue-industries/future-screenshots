@if (api.automatic()) {
  <div class="dropdowns-container">
    <div class="dropdown-wrapper">
      <label class="dropdown-label" i18n>PREFERENCE:</label>
      <div class="dropdown-select">
        <select [ngModel]="state.batchPreference()" (ngModelChange)="state.batchPreference.set($event)" class="dropdown">
          <option value="" i18n>none</option>
          @for (opt of preferenceOptions; track opt.value) {
            <option [value]="opt.value">{{ opt.label }}</option>
          }
        </select>
        <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M2 4L6 8L10 4" stroke="#B969FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
    <div class="dropdown-wrapper">
      <label class="dropdown-label" i18n>POTENTIAL:</label>
      <div class="dropdown-select">
        <select [ngModel]="state.batchPotential()" (ngModelChange)="state.batchPotential.set($event)" class="dropdown">
          <option [ngValue]="null" i18n>none</option>
          @for (opt of potentialOptions; track opt.value) {
            <option [ngValue]="opt.value">{{ opt.label }}</option>
          }
        </select>
        <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M2 4L6 8L10 4" stroke="#B969FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>
    <div class="tags-wrapper">
      <label class="tags-label" i18n>TAGS:</label>
      <div class="tags-input-container">
        <div class="tags-input-wrapper">
          <div class="tags-input-with-chips">
            @for (tag of state.batchTags(); track tag) {
              <span class="tag-chip">
                {{ tag }}
                <button 
                  type="button"
                  class="tag-remove"
                  (click)="removeTag(tag)"
                  aria-label="Remove tag">
                  âœ•
                </button>
              </span>
            }
            <input 
              #tagInput
              type="text"
              class="tags-input"
              placeholder="Type to add tags..."
              [value]="state.batchTagsInput()"
              (input)="onTagInputChange(tagInput.value)"
              (keydown)="onKeyDown($event)"
              (blur)="hideSuggestions()"
              aria-label="Tags input field">
          </div>
          @if (showSuggestions() && filteredTags().length > 0) {
            <div class="tags-suggestions">
              @for (tag of filteredTags(); track tag) {
                <button 
                  type="button"
                  class="tag-suggestion"
                  (click)="onSuggestionSelect(tag)"
                  (mousedown)="$event.preventDefault()">
                  {{ tag }}
                </button>
              }
            </div>
          }
        </div>
      </div>
    </div>
  </div>
}
<div class='img'>
  <div class='inner'>
      <img [src]="state.currentImageUrl()" alt="Confirmation Image">
  </div>
</div>
<div class="confirm-buttons" ltr>
  @if (isTemplateFlow) {
    <a [routerLink]="['/canvas-creator']" queryParamsHandling="merge" class="again">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
        <path d="M11 18.5H14.75C16.1424 18.5 17.4777 17.9469 18.4623 16.9623C19.4469 15.9777 20 14.6424 20 13.25C20 11.8576 19.4469 10.5223 18.4623 9.53769C17.4777 8.55312 16.1424 8 14.75 8H5M7.5 4.5L4 8L7.5 11.5" stroke="#EDECEC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span i18n>re-edit</span>
    </a>
  } @else {
    <a [routerLink]="['/scan']" queryParamsHandling="merge" class="again">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none">
        <path d="M11 18.5H14.75C16.1424 18.5 17.4777 17.9469 18.4623 16.9623C19.4469 15.9777 20 14.6424 20 13.25C20 11.8576 19.4469 10.5223 18.4623 9.53769C17.4777 8.55312 16.1424 8 14.75 8H5M7.5 4.5L4 8L7.5 11.5" stroke="#EDECEC" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span i18n>scan again</span>
    </a>
  }
  @if (!api.currentlyUploadingImage()) {
    <a (click)='upload()' class="confirm">
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
        <path d="M5.5 15.5V17.5C5.5 18.0304 5.71071 18.5391 6.08579 18.9142C6.46086 19.2893 6.96957 19.5 7.5 19.5H17.5C18.0304 19.5 18.5391 19.2893 18.9142 18.9142C19.2893 18.5391 19.5 18.0304 19.5 17.5V15.5" stroke="#4E02B2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M12.5 14.4844L12.5 5.98437M12.5 5.98437L9.5 8.98437M12.5 5.98437L15.5 8.98438" stroke="#4E02B2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span i18n>Looking Good</span>
    </a>
  } @else {
    <span class="confirm">
      <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 25 25" fill="none">
        <path d="M5.5 15.5V17.5C5.5 18.0304 5.71071 18.5391 6.08579 18.9142C6.46086 19.2893 6.96957 19.5 7.5 19.5H17.5C18.0304 19.5 18.5391 19.2893 18.9142 18.9142C19.2893 18.5391 19.5 18.0304 19.5 17.5V15.5" stroke="#4E02B2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        <path d="M12.5 14.4844L12.5 5.98437M12.5 5.98437L9.5 8.98437M12.5 5.98437L15.5 8.98438" stroke="#4E02B2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <span i18n>Uploading image...</span>
    </span>
  }
</div>